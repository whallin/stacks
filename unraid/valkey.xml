<?xml version="1.0"?>
<Container version="2">
    <!-- IMAGE -->
    <Name>valkey</Name>
    <Repository>ghcr.io/valkey-io/valkey:latest</Repository>
    <Registry>https://github.com/valkey-io/valkey-container/pkgs/container/valkey</Registry>

    <!-- BRANCHES -->
    <Branch>
        <Tag>8</Tag>
        <TagDescription>Latest version of Valkey 8</TagDescription>
    </Branch>
    <Branch>
        <Tag>7</Tag>
        <TagDescription>Latest version of Valkey 7</TagDescription>
    </Branch>

    <!-- CONTAINER SETTINGS -->
    <Network>bridge</Network> <!-- host or bridge -->
    <Shell>sh</Shell>
    <Privileged>false</Privileged>

    <!-- TEMPLATE INFORMATION -->
    <Support>https://github.com/valkey-io/valkey/issues</Support>
    <Project>https://github.com/valkey-io/valkey</Project>
    <ReadMe>https://valkey.io/topics/quickstart/</ReadMe>
    <Overview>A flexible distributed key-value database that is optimized for caching and other
        realtime workloads.</Overview>
    <Category>Tools: Network:Management Network:Other</Category>
    <TemplateURL>https://raw.githubusercontent.com/whallin/stacks/develop/unraid/valkey.xml</TemplateURL>
    <Icon>https://cdn.jsdelivr.net/gh/selfhst/icons/png/valkey.png</Icon>

    <!-- CONTAINER FLAGS -->
    <ExtraParams>--init --no-healthcheck --restart=unless-stopped</ExtraParams>
    <PostArgs>valkey-server --loglevel notice --save 300 1 --appendonly yes</PostArgs>

    <!-- MOUNTED PATHS -->
    <Config Name="Persistent Data" Target="/data" Default="/mnt/user/appdata/valkey/data" Mode="rw"
        Description="Persistent storage for Valkey" Type="Path" Display="always" Required="true"
        Mask="false">
        /mnt/user/appdata/valkey/data</Config>
    <Config Name="Local Time" Target="/etc/localtime" Default="/etc/localtime" Mode="ro"
        Description="Container's local time from host" Type="Path" Display="advanced"
        Required="false" Mask="false">/etc/localtime</Config>

    <!-- PORT MAPPINGS -->
    <Config Name="Valkey Port" Target="6379" Default="6379" Mode="tcp"
        Description="TCP port for Valkey"
        Type="Port"
        Display="always" Required="true" Mask="false">6379</Config>
</Container>