<?xml version="1.0"?>
<Container version="2">
    <!-- IMAGE -->
    <Name>nextcloud</Name>
    <Repository>nextcloud:32</Repository>
    <Registry>https://hub.docker.com/_/nextcloud/</Registry>

    <!-- CONTAINER SETTINGS -->
    <Network>bridge</Network> <!-- host or bridge -->
    <Shell>sh</Shell>
    <Privileged>false</Privileged>

    <!-- TEMPLATE INFORMATION -->
    <Support>https://github.com/nextcloud/docker/issues</Support>
    <Project>https://github.com/nextcloud/docker</Project>
    <ReadMe>https://github.com/nextcloud/docker</ReadMe>
    <Overview>
        A safe home for all your data. Access &amp;amp; share your files, calendars, contacts, mail
        &amp;amp; more from any device, on your terms.
    </Overview>
    <Category>Backup: Productivity: Tools:</Category>
    <WebUI>http://[IP]:[PORT:80]/</WebUI>
    <TemplateURL>https://raw.githubusercontent.com/whallin/stacks/develop/unraid/nextcloud.xml</TemplateURL>
    <Icon>https://cdn.jsdelivr.net/gh/selfhst/icons/png/nextcloud.png</Icon>

    <!-- CONTAINER FLAGS -->
    <ExtraParams>--init --no-healthcheck --restart=unless-stopped</ExtraParams>

    <!-- MOUNTED PATHS -->
    <Config Name="Nextcloud Data" Target="/var/www/html/" Default="/mnt/user/appdata/nextcloud/html"
        Mode="rw" Description="Main data directory for Nextcloud" Type="Path" Display="always"
        Required="false" Mask="false">/mnt/user/appdata/nextcloud/html</Config>
    <Config Name="Nextcloud Custom Apps" Target="/var/www/html/custom_apps"
        Default="/mnt/user/appdata/nextcloud/custom_apps" Mode="rw"
        Description="Custom apps directory for Nextcloud" Type="Path" Display="always"
        Required="false" Mask="false">/mnt/user/appdata/nextcloud/custom_apps</Config>
    <Config Name="Nextcloud Configuration" Target="/var/www/html/config"
        Default="/mnt/user/appdata/nextcloud/config" Mode="rw"
        Description="Configuration directory for Nextcloud" Type="Path" Display="always"
        Required="false" Mask="false">/mnt/user/appdata/nextcloud/config</Config>
    <Config Name="Nextcloud Files" Target="/var/www/html/data"
        Default="/mnt/user/appdata/nextcloud/data" Mode="rw"
        Description="User files directory for Nextcloud" Type="Path" Display="always"
        Required="false" Mask="false">/mnt/user/appdata/nextcloud/data</Config>
    <Config Name="Local Time" Target="/etc/localtime" Default="/etc/localtime" Mode="ro"
        Description="Container's local time from host" Type="Path" Display="advanced"
        Required="false" Mask="false">/etc/localtime</Config>

    <!-- PORT MAPPINGS -->
    <Config Name="Web UI Port" Target="80" Default="80" Mode="tcp"
        Description="Web UI port for Nextcloud" Type="Port" Display="always" Required="true"
        Mask="false">80</Config>

    <!-- ENVIRONMENT VARIABLES -->
    <Config Name="POSTGRES_DB" Target="POSTGRES_DB" Default="nextcloud" Mode=""
        Description="PostgreSQL database name" Type="Variable" Display="always" Required="false"
        Mask="false">nextcloud</Config>
    <Config Name="POSTGRES_USER" Target="POSTGRES_USER" Default="nextcloud" Mode=""
        Description="PostgreSQL database user" Type="Variable" Display="always" Required="false"
        Mask="false">nextcloud</Config>
    <Config Name="POSTGRES_PASSWORD" Target="POSTGRES_PASSWORD" Default="password" Mode=""
        Description="PostgreSQL database password" Type="Variable" Display="always" Required="false"
        Mask="true">password</Config>
    <Config Name="POSTGRES_HOST" Target="POSTGRES_HOST" Default="localhost" Mode=""
        Description="PostgreSQL database host" Type="Variable" Display="always" Required="false"
        Mask="false">localhost</Config>
    <Config Name="NEXTCLOUD_TRUSTED_DOMAINS" Target="NEXTCLOUD_TRUSTED_DOMAINS" Default="localhost"
        Mode="" Description="Nextcloud trusted domains" Type="Variable" Display="always"
        Required="false" Mask="false">localhost</Config>
    <Config Name="REDIS_HOST" Target="REDIS_HOST" Default="localhost" Mode=""
        Description="Redis host" Type="Variable" Display="always" Required="false"
        Mask="false">localhost</Config>
    <Config Name="REDIS_HOST_PORT" Target="REDIS_HOST_PORT" Default="6379" Mode=""
        Description="Redis host port" Type="Variable" Display="always" Required="false"
        Mask="false">6379</Config>
    <Config Name="REDIS_HOST_PASSWORD" Target="REDIS_HOST_PASSWORD" Default="password" Mode=""
        Description="Redis host password" Type="Variable" Display="always" Required="false"
        Mask="true">password</Config>
</Container>